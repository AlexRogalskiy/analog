buildscript {
    ext {
        springBootVersion = '2.0.0.BUILD-SNAPSHOT'
    }
    repositories {
        mavenCentral()
        maven { url 'https://repo.spring.io/libs-snapshot' }
    }
    dependencies {
        classpath("org.springframework.boot:spring-boot-gradle-plugin:2.0.0.BUILD-20170119.122042-301")
        classpath 'org.junit.platform:junit-platform-gradle-plugin:1.0.0-M3'
    }
}

apply plugin: 'java'
apply plugin: 'org.springframework.boot'
apply plugin: 'org.junit.platform.gradle.plugin'

jar {
    archiveName = 'analog.jar'
    version = '0.7'
    manifest {
        attributes(
                "Implementation-Title": "AnaLog",
                "Implementation-Version": version,
                "Implementation-Vendor": "Toparvion"
        )
    }
}
sourceCompatibility = 1.8
targetCompatibility = 1.8

repositories {
    // mavenLocal()
    mavenCentral()
    maven { url 'https://repo.spring.io/libs-milestone' }
    maven { url 'https://repo.spring.io/libs-snapshot' }
}

dependencies {
    // Backend compile deps
    compile('org.springframework.boot:spring-boot-devtools:2.0.0.BUILD-SNAPSHOT')
    compile('org.springframework.boot:spring-boot-starter-web:2.0.0.BUILD-SNAPSHOT')
    compile('org.springframework.boot:spring-boot-starter-actuator:2.0.0.BUILD-SNAPSHOT')
    compile('org.springframework.boot:spring-boot-starter-websocket:2.0.0.BUILD-SNAPSHOT')
//	compile('org.springframework.boot:spring-boot-starter-integration')
    compile group: 'com.google.code.findbugs', name: 'jsr305', version: '3.0.2'

    compile group: 'org.springframework.integration', name: 'spring-integration-core', version: '5.0.0.M3'
    compile group: 'org.springframework.integration', name: 'spring-integration-file', version: '5.0.0.M3'
    compile group: 'org.springframework.integration', name: 'spring-integration-rmi', version: '5.0.0.M3'
    compile group: 'io.projectreactor', name: 'reactor-core', version: '3.0.6.RELEASE'

    compile group: 'net.sf.jtidy', name: 'jtidy', version: 'r938'
    compile group: 'net.bull.javamelody', name: 'javamelody-core', version: '1.61.0'
    compile group: 'com.github.albfernandez', name: 'juniversalchardet', version: '2.0.0'

    // FrontEnd deps
    compile group: 'org.webjars', name: 'angularjs', version: '1.5.8'
    compile group: 'org.webjars', name: 'highlightjs', version: '9.7.0'
    compile group: 'org.webjars', name: 'jquery', version: '1.8.2'
    compile group: 'org.webjars', name: 'sockjs-client', version: '1.1.2'
    compile group: 'org.webjars.bower', name: 'stomp-websocket', version: '2.3.4'

    //	runtime('com.h2database:h2')
    runtime group: 'commons-logging', name: 'commons-logging', version: '1.2'

    // Test deps
    testCompile('org.springframework.boot:spring-boot-starter-test:2.0.0.BUILD-SNAPSHOT')
    testCompile("org.junit.jupiter:junit-jupiter-api:5.0.0-M4")
    testRuntime("org.junit.jupiter:junit-jupiter-engine:5.0.0-M4")
}

junitPlatform {
    enableStandardTestTask = true
}
